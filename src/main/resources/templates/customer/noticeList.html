<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>공지사항</title>
</head>

<th:block layout:fragment="css">

    <style>

        /* 이전(Previous)과 다음(Next) 버튼을 위한 기본 스타일 */
        .page-item .page-link {
            color: #ddd; /* 버튼의 기본 텍스트 색상 */
            background-color: #333; /* 배경을 어두운 색으로 설정 */
            border-color: #444; /* 버튼의 테두리 색상 */
        }

        /* 호버 상태일 때의 이전(Previous)과 다음(Next) 버튼 스타일 */
        .page-item .page-link:hover {
            color: #fff; /* 호버 상태의 텍스트 색상을 밝게 */
            background-color: #555; /* 호버 상태의 배경을 조금 더 어둡게 */
            border-color: #666; /* 호버 상태의 테두리 색상도 조금 더 어둡게 */
        }

        /* 활성화된 페이지 번호를 위한 스타일 */
        .page-item.active .page-link {
            z-index: 1;
            color: #fff; /* 활성화된 페이지 번호의 텍스트 색상을 흰색으로 */
            background-color: #2ac4ea; /* 여기에 원하시는 색상 코드를 입력 */
            border-color: #2ac4ea; /* 테두리 색상도 같게 */
            font-weight:bold; /* 글자를 굵게 */
        }

    </style>

</th:block>

<div layout:fragment="content">
    <div class="container">

        <div class="mb-5">
            <span class="border-bottom border-light" style="color:whitesmoke; font-weight: bold; font-size: 40px">공지사항</span>
        </div>

        <a sec:authorize="hasRole('ADMIN')" href="/customer/notice/write">
            <button style="float: right" class="btn btn-primary">공지사항 작성</button>
        </a>

        <form class="bg-dark" role="form" method="get" th:object="${noticeList}">

            <table class="table bg-white board">
                <thead>
                    <tr style="font-weight: bold;">
                        <td>번호</td>
                        <td>제목</td>
                        <td>등록일</td>
                        <!-- <td>조회수</td> -->
                    </tr>
                </thead>

                <tbody>
                    <tr th:each="notice, status: ${noticeListDto.getContent()}">
                        <td th:text="${notice.id}"></td>
                        <td>
                            <a th:href="'/customer/notice/read/' + ${notice.id}" th:text="${notice.subject}"></a>
                        </td>
                        <td th:text="${notice.regTime.toString().substring(0, 10)}"></td>
                        <!-- <td th:text="${notice.viewCount}"></td> -->
                    </tr>
                </tbody>
            </table>

<!--            <input type="hidden" name="searchQuery" th:value="${noticeSearchDto}">-->

<!--            paginaition-->
            <div style="margin: 0 auto;">
                <div  th:with="start = ${(noticeListDto.number / maxPage) * maxPage + 1}, end = (${(noticeListDto.totalPages == 0) ? 1 : (start + (maxPage - 1) < noticeListDto.totalPages ? start + (maxPage - 1) : noticeListDto.totalPages)})">
                    <ul class="pagination pagination-sm justify-content-center">
<!--                        Previous-->
                        <li class="page-item" th:if="${noticeListDto.hasPrevious()}" th:classappend="${noticeListDto.number eq 0} ? 'disabled' : ''">
                            <a th:href="@{'/customer/notice' + '?page=' + ${noticeListDto.number - 1}}" aria-label="Previous" class="page-link">
                                <span aria-hidden="true"><</span>
                            </a>
                        </li>
<!--                        page number-->
                        <li class="page-item" th:each="page : ${#numbers.sequence(start, end)}" th:classappend="${noticeListDto.number eq page - 1} ? 'active' : ''">
                            <a th:href="@{'/customer/notice' + '?page=' + ${page - 1}}" th:inline="text" class="page-link">[[${page}]]</a>
                        </li>
<!--                        Next-->
                        <li class="page-item" th:if="${noticeListDto.hasNext()}" th:classappend="${noticeListDto.number + 1 ge noticeListDto.totalPages} ? 'disabled' : ''">
                            <a th:href="@{'/customer/notice' + '?page=' + ${noticeListDto.number + 1}}" aria-label="Next" class="page-link">
                                <span aria-hidden="true">></span>
                            </a>
                        </li>

                    </ul>
                </div>
            </div>

<!--            search-->

        </form>

    </div>
</div>
</html>